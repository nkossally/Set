{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/deck.js","webpack:///./lib/game.js","webpack:///./lib/main.js"],"names":["COLORS","SYMBOL","NUMBER","SHADING","Deck","pile","faceUpCards","faceUpCount","selected","outOfPlayCards","dealCard","bind","createDeck","removeCard","dealNullCard","color","symbol","number","shading","i","length","j","k","l","push","card","idx","idxPile","Math","floor","random","splice","nullCard","undefined","indexOf","module","exports","Game","selection","validColors","validNumbers","validShading","validSymbols","testOne","testTwo","testThree","validSelections","isValidSelection","require","showCount","score","instructionsShowing","background","Image","src","canvasBackground","document","createElement","ctxBackground","getContext","canvas","getElementById","ctx","width","window","innerWidth","height","innerHeight","CARD_SIZE","x","y","SYMBOL_SIZE","IN_SET","CARD_MARGIN","SUBMIT_SIZE","SCORE_POS","SUBMIT_POS","DEAL_THREE_MORE_POS","SHOW_MOVE_POS","SHOW_VALID_POS","INSTRUCTIONS_BUTTON_POS","NEW_GAME_POS","INSTRUCTIONS_POS","INSTRUCTIONS_SIZE","CLOSE_INSTRUCTIONS_POS","CLOSE_INSTRUCTIONS_SIZE","OUT_OF_PLAY_POS","YOU_WIN_POS","YOU_WIN_SIZE","deck","game","canvasPattern","ctxPattern","beginPath","moveTo","lineTo","closePath","addEventListener","handleClick","drawRoundedRec","pos","radius","arcTo","fillStyle","fill","drawButton","text","textPos","font","fillText","animateDrawCard","startScale","endScale","direction","drawCard","requestAnimationFrame","scale","clearCard","strokeStyle","stroke","drawSymbols","drawDiamond","colorSymbols","drawOval","ellipse","PI","drawRectangle","rect","createPattern","globalAlpha","drawRectangles","drawDiamonds","drawOvals","event","cx","pageX","cy","pageY","handleCloseInstructions","handleShowInstructions","handleSelect","handleSubmit","handleDealThreeMore","handleShowMove","handleNewGame","includes","renderBoard","highlightSelected","oldPos","setTimeout","forEach","afterCardAnimation","drawOutOfPlayCards","showNumberOfMoves","showScore","showWin","highlightCard","drawInstructions","fillRect","card1","card2","card3","pos1","pos2","pos3","card4","card5","card6","pos4","pos5","pos6","renderBackground","prevCard","selections","findAllValidSelections","selectIndex","newGame","drawButtons","onload","column"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;AClFA,IAAMA,MAAM,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAAf;AACA,IAAMC,MAAM,GAAG,CAAC,MAAD,EAAS,WAAT,EAAsB,SAAtB,CAAf;AACA,IAAMC,MAAM,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAf;AACA,IAAMC,OAAO,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,SAAlB,CAAhB;;IAEMC,I;;;AACJ,kBAAa;AAAA;;AACX,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKG,YAAL,GAAoB,KAAKA,YAAL,CAAkBH,IAAlB,CAAuB,IAAvB,CAApB;AACD;;;;yBAEII,K,EAAOC,M,EAAQC,M,EAAQC,O,EAAQ;AAClC,aAAO;AAACH,aAAK,EAAEA,KAAR;AAAeC,cAAM,EAAEA,MAAvB;AAA+BC,cAAM,EAAEA,MAAvC;AAA+CC,eAAO,EAAEA;AAAxD,OAAP;AACD;;;iCAEW;AACV,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,MAAM,CAACoB,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,MAAM,CAACmB,MAA3B,EAAmCC,CAAC,EAApC,EAAwC;AACtC,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,MAAM,CAACkB,MAA3B,EAAmCE,CAAC,EAApC,EAAwC;AACtC,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,OAAO,CAACiB,MAA5B,EAAoCG,CAAC,EAArC,EAAyC;AACvC,mBAAKlB,IAAL,CAAUmB,IAAV,CAAe,KAAKC,IAAL,CAAUzB,MAAM,CAACmB,CAAD,CAAhB,EAAqBlB,MAAM,CAACoB,CAAD,CAA3B,EAAgCnB,MAAM,CAACoB,CAAD,CAAtC,EAA2CnB,OAAO,CAACoB,CAAD,CAAlD,CAAf;AACD;AACF;AACF;AACF;AACF;;;6BAEQG,G,EAAI;AACX;AACA;AACA;AACA,UAAG,KAAKrB,IAAL,CAAUe,MAAV,GAAmB,CAAtB,EAAwB;AACtBO,eAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAe,KAAKzB,IAAL,CAAUe,MAAV,GAAiB,CAAhC,CAAX,CAAV;AACA,aAAKd,WAAL,CAAiBoB,GAAjB,IAAuB,KAAKrB,IAAL,CAAUsB,OAAV,CAAvB;AACA,aAAKpB,WAAL,IAAoB,CAApB;AACA,aAAKF,IAAL,CAAU0B,MAAV,CAAiBJ,OAAjB,EAA0B,CAA1B;AACA,eAAO,KAAKrB,WAAL,CAAiBoB,GAAjB,CAAP;AACD,OAND,MAMO;AACL,eAAO,KAAKZ,YAAL,CAAkBY,GAAlB,CAAP;AACD;AACF;;;iCAEYA,G,EAAI;AACf,UAAIM,QAAQ,GAAI,KAAKP,IAAL,CAAUQ,SAAV,EAAqBA,SAArB,EAAgCA,SAAhC,EAA2CA,SAA3C,CAAhB;AACA,WAAK3B,WAAL,CAAiBoB,GAAjB,IAAwBM,QAAxB;AACA,aAAOA,QAAP;AACD;;;+BAEUP,I,EAAK;AACd,WAAKhB,cAAL,CAAoBe,IAApB,CAAyBC,IAAzB,EADc,CAEd;;AACAC,SAAG,GAAG,KAAKpB,WAAL,CAAiB4B,OAAjB,CAAyBT,IAAzB,CAAN;AACA,WAAKlB,WAAL,IAAoB,CAApB;;AAEA,UAAG,KAAKA,WAAL,GAAmB,EAAtB,EAA0B;AAExB,aAAKG,QAAL,CAAcgB,GAAd;AACD,OAHD,MAGO;AACL,aAAKZ,YAAL,CAAkBY,GAAlB;AACD;;AACD,aAAOA,GAAP;AACD;;;;;;AAGHS,MAAM,CAACC,OAAP,GAAiBhC,IAAjB,C;;;;;;;;;;;;;;;;;ICvEMiC,I;;;AACJ,kBAAa;AAAA;AACZ;;;;qCAEgBC,S,EAAU;AACzB,aAAOA,SAAS,CAAClB,MAAV,KAAqB,CAArB,IAA0B,KAAKmB,WAAL,CAAiBD,SAAjB,CAA1B,IAAyD,KAAKE,YAAL,CAAkBF,SAAlB,CAAzD,IACF,KAAKG,YAAL,CAAkBH,SAAlB,CADE,IAC8B,KAAKI,YAAL,CAAkBJ,SAAlB,CADrC;AAED;;;gCAEWA,S,EAAU;AACpBK,aAAO,GAAGL,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAApC,IACLuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KADzC;AAEA6B,aAAO,GAAGN,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAApC,IACLuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAD/B,IAELuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBuB,SAAS,CAAC,CAAD,CAAT,CAAavB,KAFzC;AAGA8B,eAAS,GAAGP,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBkB,SAAvB,IAAoCK,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBkB,SAA3D,IACPK,SAAS,CAAC,CAAD,CAAT,CAAavB,KAAb,KAAuBkB,SAD5B;AAEA,aAAO,CAACU,OAAO,IAAIC,OAAZ,KAAwBC,SAA/B;AACD;;;iCAEYP,S,EAAU;AACrBK,aAAO,GAAGL,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAb,KAAyBoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAtC,IACLoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAb,KAAyBoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAD3C;AAEA0B,aAAO,GAAGN,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAb,KAAyBoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAtC,IACLoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAb,KAAyBoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OADjC,IAELoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAAb,KAAyBoB,SAAS,CAAC,CAAD,CAAT,CAAapB,OAF3C;AAGA,aAAOyB,OAAO,IAAIC,OAAlB;AACD;;;iCAEYN,S,EAAU;AACrBK,aAAO,GAAGL,SAAS,CAAC,CAAD,CAAT,CAAarB,MAAb,KAAwBqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAArC,IACLqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAAb,KAAwBqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAD1C;AAEA2B,aAAO,GAAGN,SAAS,CAAC,CAAD,CAAT,CAAarB,MAAb,KAAwBqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAArC,IACLqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAAb,KAAwBqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MADhC,IAELqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAAb,KAAwBqB,SAAS,CAAC,CAAD,CAAT,CAAarB,MAF1C;AAGA,aAAO0B,OAAO,IAAIC,OAAlB;AACD;;;iCAEYN,S,EAAU;AACrBK,aAAO,GAAGL,SAAS,CAAC,CAAD,CAAT,CAAatB,MAAb,KAAwBsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAArC,IACLsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAAb,KAAwBsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAD1C;AAEA4B,aAAO,GAAGN,SAAS,CAAC,CAAD,CAAT,CAAatB,MAAb,KAAwBsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAArC,IACLsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAAb,KAAwBsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MADhC,IAELsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAAb,KAAwBsB,SAAS,CAAC,CAAD,CAAT,CAAatB,MAF1C;AAGA,aAAO2B,OAAO,IAAIC,OAAlB;AACD;;;2CAEsBtC,W,EAAY;AACjCwC,qBAAe,GAAG,EAAlB;;AACA,WAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,WAAW,CAACc,MAAZ,GAAmB,CAAvC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,aAAK,IAAIE,CAAC,GAAGF,CAAC,GAAC,CAAf,EAAkBE,CAAC,GAAGf,WAAW,CAACc,MAAZ,GAAmB,CAAzC,EAA4CC,CAAC,EAA7C,EAAiD;AAC/C,eAAK,IAAIC,CAAC,GAAGD,CAAC,GAAC,CAAf,EAAkBC,CAAC,GAAGhB,WAAW,CAACc,MAAlC,EAA0CE,CAAC,EAA3C,EAA+C;AAC7C,gBAAGH,CAAC,KAAKE,CAAN,IAAWF,CAAC,KAAKG,CAAjB,IAAsBD,CAAC,KAAKC,CAA/B,EAAkC;AAC9B,kBAAIgB,SAAS,GAAG,CAAChC,WAAW,CAACa,CAAD,CAAZ,EAAiBb,WAAW,CAACe,CAAD,CAA5B,EAAiCf,WAAW,CAACgB,CAAD,CAA5C,CAAhB;;AACA,kBAAG,KAAKyB,gBAAL,CAAsBT,SAAtB,CAAH,EAAoC;AAClCQ,+BAAe,CAACtB,IAAhB,CAAqBc,SAArB;AACD;AACJ;AACF;AACF;AACF;;AACD,aAAOQ,eAAP;AACD;;;;;;AAIHX,MAAM,CAACC,OAAP,GAAiBC,IAAjB,C;;;;;;;;;;;AClEA,IAAMjC,IAAI,GAAG4C,mBAAO,CAAC,gCAAD,CAApB;;AACA,IAAMX,IAAI,GAAGW,mBAAO,CAAC,gCAAD,CAApB;;AAEA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,KAAK,GAAG,CAAZ;AAEA,IAAIC,mBAAmB,GAAG,KAA1B;AAEA,IAAIC,UAAU,GAAG,IAAIC,KAAJ,EAAjB;AACAD,UAAU,CAACE,GAAX,GAAiB,4BAAjB;AACA,IAAIC,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAvB;AACA,IAAIC,aAAa,GAAGH,gBAAgB,CAACI,UAAjB,CAA4B,IAA5B,CAApB;AAGE,IAAIC,MAAM,GAAGJ,QAAQ,CAACK,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIC,GAAG,GAAGF,MAAM,CAACD,UAAP,CAAkB,IAAlB,CAAV;AACAC,MAAM,CAACG,KAAP,GAAeC,MAAM,CAACC,UAAtB;AACAL,MAAM,CAACM,MAAP,GAAgBF,MAAM,CAACG,WAAvB;AAGA,IAAMC,SAAS,GAAG;AAACC,GAAC,EAAE,MAAI,GAAJ,GAAQ,GAAZ;AAAiBC,GAAC,EAAE,MAAI,GAAJ,GAAQ;AAA5B,CAAlB;AACA,IAAMC,WAAW,GAAGH,SAAS,CAACE,CAAV,GAAY,CAAZ,GAAc,EAAlC;AACA,IAAME,MAAM,GAAG;AAACH,GAAC,EAAE,EAAJ;AAAQC,GAAC,EAAE;AAAX,CAAf;AACA,IAAMG,WAAW,GAAG;AAACJ,GAAC,EAAE,EAAJ;AAAQC,GAAC,EAAE;AAAX,CAApB;AACA,IAAMI,WAAW,GAAG;AAACL,GAAC,EAAE,GAAJ;AAASC,GAAC,EAAE;AAAZ,CAApB;AACA,IAAMK,SAAS,GAAG;AAACN,GAAC,EAAEG,MAAM,CAACH,CAAP,GAAS,KAAGD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA3B,CAAb;AAA4CC,GAAC,EAAEE,MAAM,CAACF;AAAtD,CAAlB;AACA,IAAMM,UAAU,GAAG;AAACP,GAAC,EAAEM,SAAS,CAACN,CAAd;AAAiBC,GAAC,EAAEK,SAAS,CAACL,CAAV,GAAcI,WAAW,CAACJ,CAA1B,GAA4B;AAAhD,CAAnB;AACA,IAAMO,mBAAmB,GAAG;AAACR,GAAC,EAAEO,UAAU,CAACP,CAAf;AAAkBC,GAAC,EAAEM,UAAU,CAACN,CAAX,GAAeI,WAAW,CAACJ,CAA3B,GAA6B;AAAlD,CAA5B;AACA,IAAMQ,aAAa,GAAG;AAACT,GAAC,EAAEQ,mBAAmB,CAACR,CAAxB;AAA2BC,GAAC,EAAEO,mBAAmB,CAACP,CAApB,GAAsBI,WAAW,CAACJ,CAAlC,GAAoC;AAAlE,CAAtB;AACA,IAAMS,cAAc,GAAG;AAACV,GAAC,EAAES,aAAa,CAACT,CAAlB;AAAqBC,GAAC,EAAEQ,aAAa,CAACR,CAAd,GAAgBI,WAAW,CAACJ,CAA5B,GAA8B;AAAtD,CAAvB;AACA,IAAMU,uBAAuB,GAAE;AAACX,GAAC,EAAEU,cAAc,CAACV,CAAnB;AAAsBC,GAAC,EAAES,cAAc,CAACT,CAAf,GAAmBI,WAAW,CAACJ,CAA/B,GAAiC;AAA1D,CAA/B;AACA,IAAMW,YAAY,GAAG;AAACZ,GAAC,EAAEW,uBAAuB,CAACX,CAA5B;AAA+BC,GAAC,EAAEU,uBAAuB,CAACV,CAAxB,GAA4BI,WAAW,CAACJ,CAAxC,GAA0C;AAA5E,CAArB;AACA,IAAMY,gBAAgB,GAAG;AAACb,GAAC,EAAEG,MAAM,CAACH,CAAP,GAAS,IAAED,SAAS,CAACC,CAArB,GAAuB,MAAII,WAAW,CAACJ,CAA3C;AAA8CC,GAAC,EAAE;AAAjD,CAAzB;AACA,IAAMa,iBAAiB,GAAG;AAACd,GAAC,EAAE,GAAJ;AAASC,GAAC,EAAEV,MAAM,CAACM;AAAnB,CAA1B;AACA,IAAMkB,sBAAsB,GAAG;AAACf,GAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmBc,iBAAiB,CAACd,CAArC,GAAyC,EAA7C;AAAiDC,GAAC,EAAE;AAApD,CAA/B;AACA,IAAMe,uBAAuB,GAAG;AAAChB,GAAC,EAAE,EAAJ;AAAQC,GAAC,EAAE;AAAX,CAAhC;AACA,IAAMgB,eAAe,GAAG;AAACjB,GAAC,EAAEO,UAAU,CAACP,CAAX,GAAaK,WAAW,CAACL,CAAzB,GAA2BI,WAAW,CAACJ,CAA3C;AAA8CC,GAAC,EAAEE,MAAM,CAACF;AAAxD,CAAxB;AACA,IAAMiB,WAAW,GAAG;AAAClB,GAAC,EAAE,GAAJ;AAASC,GAAC,EAAC;AAAX,CAApB;AACA,IAAMkB,YAAY,GAAG;AAACnB,GAAC,EAAE,GAAJ;AAASC,GAAC,EAAE;AAAZ,CAArB;AAIAmB,IAAI,GAAG,IAAIrF,IAAJ,EAAP;AACAsF,IAAI,GAAG,IAAIrD,IAAJ,EAAP;AACAoD,IAAI,CAAC7E,UAAL;AAEF,IAAI+E,aAAa,GAAGnC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAApB;AACA,IAAImC,UAAU,GAAGD,aAAa,CAAChC,UAAd,CAAyB,IAAzB,CAAjB;AACAgC,aAAa,CAAC5B,KAAd,GAAsB,EAAtB;AACA4B,aAAa,CAACzB,MAAd,GAAuB,EAAvB;AAKA0B,UAAU,CAACC,SAAX;AACAD,UAAU,CAACE,MAAX,CAAkB,EAAlB,EAAsB,EAAtB;AACAF,UAAU,CAACG,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACAH,UAAU,CAACI,SAAX;AAKApC,MAAM,CAACqC,gBAAP,CAAwB,OAAxB,EAAiCC,WAAjC;;AAGAC,cAAc,GAAC,wBAACC,GAAD,EAAMrC,KAAN,EAAa3C,MAAb,EAAqBiF,MAArB,EAA6BtF,KAA7B,EAAqC;AAE9C+C,KAAG,CAAC+B,SAAJ;AACA/B,KAAG,CAACgC,MAAJ,CAAWM,GAAG,CAAC/B,CAAJ,GAAMgC,MAAjB,EAAyBD,GAAG,CAAC9B,CAA7B;AACAR,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAMN,KAAN,GAAYsC,MAAvB,EAA+BD,GAAG,CAAC9B,CAAnC,EAAsC+B,MAAtC;AACAvC,KAAG,CAACwC,KAAJ,CAAUF,GAAG,CAAC/B,CAAJ,GAAMN,KAAhB,EAAuBqC,GAAG,CAAC9B,CAA3B,EAA8B8B,GAAG,CAAC/B,CAAJ,GAAMN,KAApC,EAA2CqC,GAAG,CAAC9B,CAAJ,GAAM+B,MAAjD,EAAyDA,MAAzD;AACAvC,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAMN,KAAjB,EAAwBqC,GAAG,CAAC9B,CAAJ,GAAMlD,MAAN,GAAaiF,MAArC;AACAvC,KAAG,CAACwC,KAAJ,CAAUF,GAAG,CAAC/B,CAAJ,GAAMN,KAAhB,EAAuBqC,GAAG,CAAC9B,CAAJ,GAAMlD,MAA7B,EAAqCgF,GAAG,CAAC/B,CAAJ,GAAMN,KAAN,GAAYsC,MAAjD,EAAyDD,GAAG,CAAC9B,CAAJ,GAAMlD,MAA/D,EAAuEiF,MAAvE;AACAvC,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAMgC,MAAjB,EAAyBD,GAAG,CAAC9B,CAAJ,GAAMlD,MAA/B;AACA0C,KAAG,CAACwC,KAAJ,CAAUF,GAAG,CAAC/B,CAAd,EAAiB+B,GAAG,CAAC9B,CAAJ,GAAMlD,MAAvB,EAA+BgF,GAAG,CAAC/B,CAAnC,EAAsC+B,GAAG,CAAC9B,CAAJ,GAAMlD,MAAN,GAAaiF,MAAnD,EAA2DA,MAA3D;AACAvC,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAf,EAAkB+B,GAAG,CAAC9B,CAAJ,GAAM+B,MAAxB;AACAvC,KAAG,CAACwC,KAAJ,CAAUF,GAAG,CAAC/B,CAAd,EAAiB+B,GAAG,CAAC9B,CAArB,EAAwB8B,GAAG,CAAC/B,CAAJ,GAAMgC,MAA9B,EAAsCD,GAAG,CAAC9B,CAA1C,EAA6C+B,MAA7C;AACAvC,KAAG,CAACyC,SAAJ,GAAgBxF,KAAhB;AACA+C,KAAG,CAAC0C,IAAJ;AACA1C,KAAG,CAACkC,SAAJ;AAEJ,CAhBF;;AAkBCS,UAAU,GAAC,oBAACL,GAAD,EAAMM,IAAN,EAAYC,OAAZ,EAAqB5F,KAArB,EAA6B;AACvCoF,gBAAc,CAACC,GAAD,EAAM1B,WAAW,CAACL,CAAlB,EAAqBK,WAAW,CAACJ,CAAjC,EAAoCI,WAAW,CAACL,CAAZ,GAAc,EAAlD,EAAsDtD,KAAtD,CAAd;AACA+C,KAAG,CAACyC,SAAJ,GAAgB,OAAhB;AACAzC,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AACA9C,KAAG,CAAC+C,QAAJ,CAAaH,IAAb,EAAmBN,GAAG,CAAC/B,CAAJ,GAAMsC,OAAO,CAACtC,CAAjC,EAAoC+B,GAAG,CAAC9B,CAAJ,GAAMqC,OAAO,CAACrC,CAAlD;AACD,CALA,C,CAQG;AACA;;;AAEJwC,eAAe;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,EAAC,UAACV,GAAD,EAAMW,UAAN,EAAkBC,QAAlB,EAA4BjG,KAA5B,EAAmCU,IAAnC,EAAyCwF,SAAzC,EAAqD;AACnE,MAAGF,UAAU,KAAKC,QAAlB,EAA2B;AAEzBE,YAAQ,CAACd,GAAD,EAAMW,UAAN,EAAkBhG,KAAlB,EAAyBU,IAAzB,CAAR;AACAwF,aAAS,KAAK,UAAd,GAA2BF,UAAU,IAAI,GAAzC,GAA+CA,UAAU,IAAI,GAA7D;AACAI,yBAAqB,CAAC,YAAU;AAACL,qBAAe,CAACV,GAAD,EAAMW,UAAN,EAAkBC,QAAlB,EAA4BjG,KAA5B,EAAmCU,IAAnC,EAAyCwF,SAAzC,CAAf;AAAmE,KAA/E,CAArB;AACD;AACF,CAPc,CAAf;;AASEC,QAAQ,GAAC,kBAAEd,GAAF,EAAOgB,KAAP,EAAcrG,KAAd,EAAqBU,IAArB,EAA4B;AACnC,MAAG2F,KAAK,IAAE,CAAV,EAAY;AACZC,aAAS,CAACjB,GAAD,CAAT;AACAD,kBAAc,CAACC,GAAD,EAAMhC,SAAS,CAACC,CAAV,GAAY+C,KAAlB,EAAyBhD,SAAS,CAACE,CAAV,GAAY8C,KAArC,EAA4ChD,SAAS,CAACC,CAAV,GAAY+C,KAAZ,GAAkB,EAA9D,EAAkErG,KAAlE,CAAd;AACA+C,OAAG,CAACwD,WAAJ,GAAkB,SAAlB;AACAxD,OAAG,CAACyD,MAAJ;AACA,QAAG9F,IAAH,EAAS+F,WAAW,CAAC/F,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,CAAX;AACR;AACF,CARD;;AAYDK,WAAW,GAAC,qBAAChG,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AAC/BtD,KAAG,CAAC+B,SAAJ;AACA/B,KAAG,CAACgC,MAAJ,CAAWM,GAAG,CAAC/B,CAAf,EAAkB+B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAA1C;AACAtD,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAA7B,EAAoChB,GAAG,CAAC9B,CAAxC;AACAR,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAM,IAAEE,WAAF,GAAc6C,KAA/B,EAAsChB,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAA9D;AACAtD,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAA7B,EAAoChB,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAtD;AACAtD,KAAG,CAACiC,MAAJ,CAAWK,GAAG,CAAC/B,CAAf,EAAkB+B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAA1C;AACAtD,KAAG,CAACkC,SAAJ;AACA0B,cAAY,CAACjG,IAAD,CAAZ;AACD,CATA;;AAWAkG,QAAQ,GAAC,kBAAClG,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AAC5BtD,KAAG,CAAC+B,SAAJ;AACA/B,KAAG,CAAC8D,OAAJ,CAAYxB,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAA9B,EAAqChB,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAA7D,EAAgE7C,WAAW,GAAC6C,KAA5E,EAAmF7C,WAAW,GAAC6C,KAAZ,GAAkB,CAArG,EAAwG,CAAxG,EAA2G,CAA3G,EAA8G,IAAExF,IAAI,CAACiG,EAArH;AACA/D,KAAG,CAACkC,SAAJ;AACA0B,cAAY,CAACjG,IAAD,CAAZ;AACD,CALA;;AAODqG,aAAa,GAAC,uBAAErG,IAAF,EAAQ2E,GAAR,EAAagB,KAAb,EAAqB;AACjCtD,KAAG,CAAC+B,SAAJ;AACA/B,KAAG,CAACiE,IAAJ,CAAS3B,GAAG,CAAC/B,CAAb,EAAgB+B,GAAG,CAAC9B,CAApB,EAAuB,IAAEC,WAAF,GAAc6C,KAArC,EAA4C7C,WAAW,GAAC6C,KAAxD;AACAtD,KAAG,CAACkC,SAAJ;AACA0B,cAAY,CAACjG,IAAD,CAAZ;AACD,CALD;;AAQAiG,YAAY,GAAC,sBAACjG,IAAD,EAAQ;AACnBqC,KAAG,CAACyC,SAAJ,GAAgB9E,IAAI,CAACV,KAArB;AACA+C,KAAG,CAACwD,WAAJ,GAAkB7F,IAAI,CAACV,KAAvB;AACA,MAAGU,IAAI,CAACP,OAAL,KAAiB,MAApB,EAA4B4C,GAAG,CAACyD,MAAJ;AAC5B,MAAG9F,IAAI,CAACP,OAAL,KAAiB,OAApB,EAA6B4C,GAAG,CAAC0C,IAAJ;;AAC7B,MAAG/E,IAAI,CAACP,OAAL,KAAiB,SAApB,EAA+B;AAC7B0E,cAAU,CAAC0B,WAAX,GAAyB7F,IAAI,CAACV,KAA9B;AACA6E,cAAU,CAAC2B,MAAX;AACAzD,OAAG,CAACyC,SAAJ,GAAgBzC,GAAG,CAACkE,aAAJ,CAAkBrC,aAAlB,EAAgC,QAAhC,CAAhB;AACA7B,OAAG,CAACyD,MAAJ;AACAzD,OAAG,CAAC0C,IAAJ;AACD;AACF,CAZD,C,CAeA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAgB,WAAW,GAAC,qBAAC/F,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AAC9B,MAAG3F,IAAI,CAACT,MAAL,KAAgBiB,SAAnB,EAA6B;AAC3B6B,OAAG,CAACmE,WAAJ,GAAkB,EAAlB;AACAf,YAAQ,CAACd,GAAD,EAAMgB,KAAN,EAAatD,GAAG,CAACkE,aAAJ,CAAkB5E,UAAlB,EAA6B,QAA7B,CAAb,CAAR;AACAU,OAAG,CAACmE,WAAJ,GAAkB,CAAlB;AACD;;AACD,MAAGxG,IAAI,CAACT,MAAL,KAAgB,WAAnB,EAAgCkH,cAAc,CAACzG,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,CAAd;AAChC,MAAG3F,IAAI,CAACT,MAAL,KAAgB,SAAnB,EAA8BmH,YAAY,CAAC1G,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,CAAZ;AAC9B,MAAG3F,IAAI,CAACT,MAAL,KAAgB,MAAnB,EAA2BoH,SAAS,CAAC3G,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,CAAT;AAC5B,CATD;;AAYAc,cAAc,GAAC,wBAACzG,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AACjC,MAAG3F,IAAI,CAACR,MAAL,KAAgB,CAAnB,EAAqB;AACnB6G,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAb;AACD,GAFD,MAEO,IAAI3F,IAAI,CAACR,MAAL,KAAgB,CAApB,EAAsB;AAC3B6G,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB;AAA9D,KAAP,EAAyEA,KAAzE,CAAb;AACAU,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAb;AACD,GAHM,MAGA;AACLU,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB;AAA5D,KAAP,EAAuEA,KAAvE,CAAb;AACAU,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAb;AACAU,iBAAa,CAACrG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAb;AACD;AACF,CAXD;;AAaAgB,SAAS,GAAC,mBAAC3G,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AAC5B,MAAG3F,IAAI,CAACR,MAAL,KAAgB,CAAnB,EAAqB;AACnB0G,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAR;AACD,GAFD,MAEO,IAAI3F,IAAI,CAACR,MAAL,KAAgB,CAApB,EAAsB;AAC3B0G,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB;AAA9D,KAAP,EAAyEA,KAAzE,CAAR;AACAO,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAR;AACD,GAHM,MAGA;AACLO,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB;AAA5D,KAAP,EAAuEA,KAAvE,CAAR;AACAO,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAR;AACAO,YAAQ,CAAClG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAR;AACD;AACF,CAXD;;AAaAe,YAAY,GAAC,sBAAC1G,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AAC/B,MAAG3F,IAAI,CAACR,MAAL,KAAgB,CAAnB,EAAqB;AACnBwG,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAX;AACD,GAFD,MAEO,IAAI3F,IAAI,CAACR,MAAL,KAAgB,CAApB,EAAsB;AAC3BwG,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB;AAA9D,KAAP,EAAyEA,KAAzE,CAAX;AACAK,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAX;AACD,GAHM,MAGA;AACLK,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB;AAA5D,KAAP,EAAuEA,KAAvE,CAAX;AACAK,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAX;AACAK,eAAW,CAAChG,IAAD,EAAO;AAAC4C,OAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAME,WAAW,GAAC6C,KAAZ,GAAkB,CAAlB,GAAoB,CAA9B;AAAiC9C,OAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAMC,WAAW,GAAC6C,KAAZ,GAAkB,EAAlB,GAAqB;AAA/D,KAAP,EAA0EA,KAA1E,CAAX;AACD;AACF,CAXD;;AAaA,SAASlB,WAAT,CAAqBmC,KAArB,EAA2B;AACzBC,IAAE,GAAGD,KAAK,CAACE,KAAX;AACAC,IAAE,GAAGH,KAAK,CAACI,KAAX;;AACA,MAAGtF,mBAAH,EAAuB;AACrBuF,2BAAuB,CAACJ,EAAD,EAAKE,EAAL,CAAvB;AACD,GAFD,MAEO,IAAItF,KAAK,GAAG,EAAZ,EAAgB;AAErByF,0BAAsB,CAACL,EAAD,EAAKE,EAAL,CAAtB;AACAI,gBAAY,CAACN,EAAD,EAAKE,EAAL,CAAZ;AACAK,gBAAY,CAACP,EAAD,EAAKE,EAAL,CAAZ;AACAM,uBAAmB,CAACR,EAAD,EAAKE,EAAL,CAAnB;AACAO,kBAAc,CAACT,EAAD,EAAKE,EAAL,CAAd;AACAQ,iBAAa,CAACV,EAAD,EAAKE,EAAL,CAAb;AACD,GARM,MAQC;AACNQ,iBAAa,CAACV,EAAD,EAAKE,EAAL,CAAb;AAED;AACF;;AAEDI,YAAY,GAAC,sBAACN,EAAD,EAAKE,EAAL,EAAU;AACrB,OAAK,IAAIrH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,QAAMiF,GAAG,GAAG;AAAC/B,OAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWV,CAAC,GAAC,CAAb,KAAiBiD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzC,CAAb;AAA0DC,OAAC,EAAEE,MAAM,CAACF,CAAP,GAAUnD,CAAC,GAAC,CAAH,IAAOiD,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAA/B;AAAtE,KAAZ;;AACA,QAAGgE,EAAE,IAAIlC,GAAG,CAAC/B,CAAV,IAAeiE,EAAE,IAAIlC,GAAG,CAAC/B,CAAJ,GAAQD,SAAS,CAACC,CAAvC,IACDmE,EAAE,IAAIpC,GAAG,CAAC9B,CADT,IACckE,EAAE,IAAIpC,GAAG,CAAC9B,CAAJ,GAAMF,SAAS,CAACE,CADvC,EACyC;AACvC,UAAI7C,IAAI,GAAGgE,IAAI,CAACnF,WAAL,CAAiBa,CAAjB,CAAX;;AACA,UAAIM,IAAI,IAAIA,IAAI,CAACT,MAAL,KAAgBiB,SAA5B,EAAsC;AACpC,YAAGwD,IAAI,CAACjF,QAAL,CAAcyI,QAAd,CAAuBxH,IAAvB,CAAH,EAAgC;AAC9BgE,cAAI,CAACjF,QAAL,CAAcuB,MAAd,CAAqB0D,IAAI,CAACjF,QAAL,CAAc0B,OAAd,CAAsBT,IAAtB,CAArB,EAAkD,CAAlD;AACAyH,qBAAW;AACXC,2BAAiB;AAClB,SAJD,MAIO;AACL1D,cAAI,CAACjF,QAAL,CAAcgB,IAAd,CAAmBiE,IAAI,CAACnF,WAAL,CAAiBa,CAAjB,CAAnB;AACA+H,qBAAW;AACXC,2BAAiB;AAClB;AACF;;AACD,UAAI1D,IAAI,CAACjF,QAAL,CAAcY,MAAd,GAAuB,CAA3B,EAA8B;AAC5B,YAAMM,IAAG,GAAG+D,IAAI,CAACnF,WAAL,CAAiB4B,OAAjB,CAAyBuD,IAAI,CAACjF,QAAL,CAAc,CAAd,CAAzB,CAAZ;;AACA,YAAM4I,MAAM,GAAG;AAAC/E,WAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWH,IAAG,GAAC,CAAf,KAAmB0C,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA3C,CAAb;AAA4DC,WAAC,EAAEE,MAAM,CAACF,CAAP,GAAU5C,IAAG,GAAC,CAAL,IAAS0C,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAAjC;AAAxE,SAAf;AACAmB,YAAI,CAACjF,QAAL,CAAcuB,MAAd,CAAqB,CAArB,EAAwB,CAAxB,EAH4B,CAI5B;AACA;AACA;;AACAmH,mBAAW;AACXC,yBAAiB;AAClB;;AACD;AACD;AACF;AACF,CA9BD;;AAkCAN,YAAY,GAAC,sBAACP,EAAD,EAAKE,EAAL,EAAU;AACrB,MAAGF,EAAE,IAAI1D,UAAU,CAACP,CAAjB,IAAsBiE,EAAE,IAAI1D,UAAU,CAACP,CAAX,GAAeK,WAAW,CAACL,CAAvD,IACDmE,EAAE,IAAI5D,UAAU,CAACN,CADhB,IACqBkE,EAAE,IAAI5D,UAAU,CAACN,CAAX,GAAaI,WAAW,CAACJ,CADvD,EACyD;AACvDmC,cAAU,CAAC7B,UAAD,EAAa,QAAb,EAAuB;AAACP,OAAC,EAAE,EAAJ;AAAQC,OAAC,EAAE;AAAX,KAAvB,EAAuC,SAAvC,CAAV;AACAN,UAAM,CAACqF,UAAP,CAAoB,YAAU;AAAC5C,gBAAU,CAAC7B,UAAD,EAAa,QAAb,EAAuB;AAACP,SAAC,EAAE,EAAJ;AAAQC,SAAC,EAAE;AAAX,OAAvB,EAAuC,MAAvC,CAAV;AAAyD,KAAxF,EAA0F,GAA1F;;AACA,QAAGmB,IAAI,CAACjF,QAAL,CAAcY,MAAd,KAAwB,CAA3B,EAA6B;AAC3B,UAAGsE,IAAI,CAAC3C,gBAAL,CAAsB0C,IAAI,CAACjF,QAA3B,CAAH,EAAwC;AACtCiF,YAAI,CAACjF,QAAL,CAAc8I,OAAd,CAAsB,UAAA7H,IAAI,EAAG;AAC3B,cAAMC,GAAG,GAAG+D,IAAI,CAAC5E,UAAL,CAAgBY,IAAhB,CAAZ;AACA,cAAM2E,GAAG,GAAG;AAAC/B,aAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWH,GAAG,GAAC,CAAf,KAAmB0C,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA3C,CAAb;AAA4DC,aAAC,EAAEE,MAAM,CAACF,CAAP,GAAU5C,GAAG,GAAC,CAAL,IAAS0C,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAAjC;AAAxE,WAAZ,CAF2B,CAG3B;;AACAwC,yBAAe,CAACV,GAAD,EAAM,CAAN,EAAS,CAAT,EAAY,OAAZ,EAAqB3E,IAArB,EAA2B,UAA3B,CAAf;AACA4H,oBAAU,CAAG,YAAU;AAACvC,2BAAe,CAACV,GAAD,EAAM,CAAN,EAAS,CAAT,EAAY,OAAZ,EAAqBX,IAAI,CAACnF,WAAL,CAAiBoB,GAAjB,CAArB,EAA4C,UAA5C,CAAf;AAAuE,WAArF,EAAuF,EAAvF,CAAV;AAEA2H,oBAAU,CAAE,YAAU;AAACE,8BAAkB,CAAC9H,IAAD,EAAO2E,GAAP,EAAY,CAAZ,CAAlB;AAAiC,WAA9C,EAAgD,EAAhD,CAAV;AACD,SARD;AASAX,YAAI,CAACjF,QAAL,GAAgB,EAAhB;AAEA0I,mBAAW;AACXhG,aAAK,IAAG,CAAR;AACAsG,0BAAkB;AAElBC,yBAAiB;AACjBC,iBAAS;AACTL,kBAAU,CAAG,YAAU;AAAC,cAAGnG,KAAK,KAAK,EAAb,EAAiByG,OAAO;AAAG,SAAzC,EAA2C,GAA3C,CAAV;AACD;AACF;AACF;AAGF,CA9BD;;AAgCAA,OAAO,GAAC,mBAAI;AACV7F,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAAC8C,IAAJ,GAAW,eAAX;AAEA9C,KAAG,CAAC+C,QAAJ,CAAa,KAAb,EAAoBtB,WAAW,CAAClB,CAAhC,EAAmCkB,WAAW,CAACjB,CAA/C;AACAR,KAAG,CAAC+C,QAAJ,CAAa,MAAb,EAAqBtB,WAAW,CAAClB,CAAZ,GAAc,CAAnC,EAAsCkB,WAAW,CAACjB,CAAZ,GAAc,GAApD;AACAR,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AACA9C,KAAG,CAAC+C,QAAJ,CAAa,qCAAb,EAAoDtB,WAAW,CAAClB,CAAZ,GAAc,EAAlE,EAAsEkB,WAAW,CAACjB,CAAZ,GAAc,GAApF;AAID,CAXD;;AAaAsF,aAAa,GAAC,uBAACxD,GAAD,EAAMrF,KAAN,EAAc;AAC1B+C,KAAG,CAACmE,WAAJ,GAAkB,EAAlB;AACA9B,gBAAc,CAACC,GAAD,EAAMhC,SAAS,CAACC,CAAhB,EAAmBD,SAAS,CAACE,CAA7B,EAAgCF,SAAS,CAACC,CAAV,GAAY,EAA5C,EAAgDtD,KAAhD,CAAd;AACA+C,KAAG,CAACmE,WAAJ,GAAkB,CAAlB;AACD,CAJD;;AAMAkB,iBAAiB,GAAC,6BAAI;AACpB,MAAIpI,KAAK,GAAG2E,IAAI,CAAC3C,gBAAL,CAAsB0C,IAAI,CAACjF,QAA3B,IAAuC,SAAvC,GAAmD,QAA/D;AACAiF,MAAI,CAACjF,QAAL,CAAc8I,OAAd,CAAsB,UAAA7H,IAAI,EAAE;AAC1BC,OAAG,GAAG+D,IAAI,CAACnF,WAAL,CAAiB4B,OAAjB,CAAyBT,IAAzB,CAAN;AACA,QAAM2E,GAAG,GAAG;AAAC/B,OAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWH,GAAG,GAAC,CAAf,KAAmB0C,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA3C,CAAb;AAA4DC,OAAC,EAAEE,MAAM,CAACF,CAAP,GAAU5C,GAAG,GAAC,CAAL,IAAS0C,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAAjC;AAAxE,KAAZ;AACAsF,iBAAa,CAACxD,GAAD,EAAMrF,KAAN,CAAb;AACD,GAJD;AAKD,CAPD;;AASA8I,gBAAgB,GAAC,4BAAI;AACnBpD,YAAU,CAACzB,uBAAD,EAA0B,cAA1B,EAA0C;AAACX,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAA1C,EAA0D,MAA1D,CAAV;AAEAR,KAAG,CAACyC,SAAJ,GAAgB,MAAhB;AACAzC,KAAG,CAACmE,WAAJ,GAAkB,EAAlB;AACAnE,KAAG,CAACgG,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBlG,MAAM,CAACG,KAA1B,EAAiCH,MAAM,CAACM,MAAxC;AAEAf,qBAAmB,GAAG,IAAtB;AAEAW,KAAG,CAACmE,WAAJ,GAAkB,CAAlB;AACAnE,KAAG,CAACyC,SAAJ,GAAe,SAAf;AACAzC,KAAG,CAACwD,WAAJ,GAAgB,SAAhB;AACAxD,KAAG,CAACgG,QAAJ,CAAa5E,gBAAgB,CAACb,CAA9B,EAAiCa,gBAAgB,CAACZ,CAAlD,EAAqDa,iBAAiB,CAACd,CAAvE,EAA0Ec,iBAAiB,CAACb,CAA5F;AACAR,KAAG,CAAC+B,SAAJ;AACA/B,KAAG,CAACiE,IAAJ,CAAS7C,gBAAgB,CAACb,CAA1B,EAA6Ba,gBAAgB,CAACZ,CAA9C,EAAiDa,iBAAiB,CAACd,CAAnE,EAAsEc,iBAAiB,CAACb,CAAxF;AACAR,KAAG,CAACkC,SAAJ;AACAlC,KAAG,CAACyD,MAAJ;AAEAzD,KAAG,CAACyC,SAAJ,GAAgB,KAAhB;AACAzC,KAAG,CAACgG,QAAJ,CAAa1E,sBAAsB,CAACf,CAApC,EAAuCe,sBAAsB,CAACd,CAA9D,EAAiEe,uBAAuB,CAAChB,CAAzF,EAA4FgB,uBAAuB,CAACf,CAApH;AACAR,KAAG,CAACyC,SAAJ,GAAgB,OAAhB;AACAzC,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AACA9C,KAAG,CAAC+C,QAAJ,CAAa,GAAb,EAAkBzB,sBAAsB,CAACf,CAAvB,GAAyB,CAA3C,EAA8Ce,sBAAsB,CAACd,CAAvB,GAAyB,EAAvE;AAEAR,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAAC+C,QAAJ,CAAa,8DAAb,EAA6E3B,gBAAgB,CAACb,CAAjB,GAAmB,EAAhG,EAAoGa,gBAAgB,CAACZ,CAAjB,GAAmB,EAAvH;AAEAR,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AAEA9C,KAAG,CAAC+C,QAAJ,CAAa,+EAAb,EACE3B,gBAAgB,CAACb,CAAjB,GAAmB,EADrB,EACyBa,gBAAgB,CAACZ,CAAjB,GAAmB,EAD5C;AAGAR,KAAG,CAAC+C,QAAJ,CAAa,4EAAb,EACE3B,gBAAgB,CAACb,CAAjB,GAAmB,EADrB,EACyBa,gBAAgB,CAACZ,CAAjB,GAAmB,GAD5C;AAGAR,KAAG,CAAC+C,QAAJ,CAAa,8EAAb,EACE3B,gBAAgB,CAACb,CAAjB,GAAmB,EADrB,EACyBa,gBAAgB,CAACZ,CAAjB,GAAmB,GAD5C;AAGAR,KAAG,CAAC+C,QAAJ,CAAa,6EAAb,EACE3B,gBAAgB,CAACb,CAAjB,GAAmB,EADrB,EACyBa,gBAAgB,CAACZ,CAAjB,GAAmB,GAD5C;AAGAR,KAAG,CAAC+C,QAAJ,CAAa,yEAAb,EACE3B,gBAAgB,CAACb,CAAjB,GAAmB,EADrB,EACyBa,gBAAgB,CAACZ,CAAjB,GAAmB,GAD5C;AAGAR,KAAG,CAAC+C,QAAJ,CAAa,8DAAb,EAA6E3B,gBAAgB,CAACb,CAAjB,GAAmB,EAAhG,EAAoGa,gBAAgB,CAACZ,CAAjB,GAAmB,GAAvH;AACAR,KAAG,CAAC+C,QAAJ,CAAa,0EAAb,EAAyF3B,gBAAgB,CAACb,CAAjB,GAAmB,EAA5G,EAAgHa,gBAAgB,CAACZ,CAAjB,GAAmB,GAAnI;AACAR,KAAG,CAAC+C,QAAJ,CAAa,uEAAb,EAAsF3B,gBAAgB,CAACb,CAAjB,GAAmB,EAAzG,EAA6Ga,gBAAgB,CAACZ,CAAjB,GAAmB,GAAhI;AACAR,KAAG,CAAC+C,QAAJ,CAAa,oEAAb,EAAmF3B,gBAAgB,CAACb,CAAjB,GAAmB,EAAtG,EAA0Ga,gBAAgB,CAACZ,CAAjB,GAAmB,GAA7H;AACAR,KAAG,CAAC+C,QAAJ,CAAa,0EAAb,EAAyF3B,gBAAgB,CAACb,CAAjB,GAAmB,EAA5G,EAAgHa,gBAAgB,CAACZ,CAAjB,GAAmB,GAAnI;AACAR,KAAG,CAAC+C,QAAJ,CAAa,4DAAb,EAA2E3B,gBAAgB,CAACb,CAAjB,GAAmB,EAA9F,EAAkGa,gBAAgB,CAACZ,CAAjB,GAAmB,GAArH;AAEA,MAAIyF,KAAK,GAAGtE,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,MAArB,EAA6B,CAA7B,EAAgC,SAAhC,CAAZ;AACA,MAAIuI,KAAK,GAAGvE,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,WAArB,EAAkC,CAAlC,EAAqC,SAArC,CAAZ;AACA,MAAIwI,KAAK,GAAGxE,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,SAArB,EAAgC,CAAhC,EAAmC,SAAnC,CAAZ;AACA,MAAIyI,IAAI,GAAG;AAAC7F,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAvB;AAA4BC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAAlD,GAAX;AACA,MAAI6F,IAAI,GAAG;AAAC9F,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAnB,GAAyB,CAACD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzB,IAA4B,CAA5B,GAA8B,CAA3D;AAA8DC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAApF,GAAX;AACA,MAAI8F,IAAI,GAAG;AAAC/F,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAnB,GAAuB,CAACD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzB,IAA4B,CAA5B,GAA8B,CAA9B,GAAgC,CAA3D;AAA8DC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAApF,GAAX;AAEA4C,UAAQ,CAACgD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AACA7C,UAAQ,CAACiD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AACA9C,UAAQ,CAACkD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AAEAnG,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAAC+C,QAAJ,CAAa,2EAAb,EAA0F3B,gBAAgB,CAACb,CAAjB,GAAmB,EAA7G,EAAiHa,gBAAgB,CAACZ,CAAjB,GAAmB,GAApI;AAEA,MAAI+F,KAAK,GAAG5E,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,MAArB,EAA6B,CAA7B,EAAgC,SAAhC,CAAZ;AACA,MAAI6I,KAAK,GAAG7E,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,WAArB,EAAkC,CAAlC,EAAqC,OAArC,CAAZ;AACA,MAAI8I,KAAK,GAAG9E,IAAI,CAAChE,IAAL,CAAU,SAAV,EAAqB,SAArB,EAAgC,CAAhC,EAAmC,MAAnC,CAAZ;AACA,MAAI+I,IAAI,GAAG;AAACnG,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAvB;AAA4BC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAAlD,GAAX;AACA,MAAImG,IAAI,GAAG;AAACpG,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAnB,GAAyB,CAACD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzB,IAA4B,CAA5B,GAA8B,CAA3D;AAA8DC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAApF,GAAX;AACA,MAAIoG,IAAI,GAAG;AAACrG,KAAC,EAAEa,gBAAgB,CAACb,CAAjB,GAAmB,GAAnB,GAAuB,CAACD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzB,IAA4B,CAA5B,GAA8B,CAA9B,GAAgC,CAA3D;AAA8DC,KAAC,EAAEY,gBAAgB,CAACZ,CAAjB,GAAmB;AAApF,GAAX;AAEA4C,UAAQ,CAACsD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AACAnD,UAAQ,CAACuD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AACApD,UAAQ,CAACwD,IAAD,EAAO,IAAE,CAAT,EAAY,OAAZ,EAAqBH,KAArB,CAAR;AAEAzG,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAAC+C,QAAJ,CAAa,gEAAb,EAA+E3B,gBAAgB,CAACb,CAAjB,GAAmB,EAAlG,EAAsGa,gBAAgB,CAACZ,CAAjB,GAAmB,GAAzH;AACD,CA9ED;;AAgFAqE,sBAAsB,GAAC,gCAACL,EAAD,EAAKE,EAAL,EAAU;AAE/B,MAAGF,EAAE,IAAItD,uBAAuB,CAACX,CAA9B,IAAmCiE,EAAE,IAAItD,uBAAuB,CAACX,CAAxB,GAA4BK,WAAW,CAACL,CAAjF,IACDmE,EAAE,IAAIxD,uBAAuB,CAACV,CAD7B,IACkCkE,EAAE,IAAIxD,uBAAuB,CAACV,CAAxB,GAA0BI,WAAW,CAACJ,CADjF,EACmF;AAC/EmC,cAAU,CAACzB,uBAAD,EAA0B,cAA1B,EAA0C;AAACX,OAAC,EAAE,EAAJ;AAAQC,OAAC,EAAE;AAAX,KAA1C,EAA0D,SAA1D,CAAV;AACA+E,cAAU,CAAGQ,gBAAH,EAAqB,GAArB,CAAV;AACH;AAEF,CARD;;AAUAnB,uBAAuB,GAAC,iCAACJ,EAAD,EAAKE,EAAL,EAAU;AAChC,MAAKF,EAAE,IAAIlD,sBAAsB,CAACf,CAA7B,IAAkCiE,EAAE,IAAIlD,sBAAsB,CAACf,CAAvB,GAA2BgB,uBAAuB,CAAChB,CAA3F,IACHmE,EAAE,IAAIpD,sBAAsB,CAACd,CAD1B,IAC+BkE,EAAE,IAAIpD,sBAAsB,CAACd,CAAvB,GAAyBe,uBAAuB,CAACf,CADvF,IAEAgE,EAAE,GAAGpD,gBAAgB,CAACb,CAFtB,IAE8BiE,EAAE,GAAGpD,gBAAgB,CAACb,CAAjB,GAAqBc,iBAAiB,CAACd,CAF9E,EAGG;AACClB,uBAAmB,GAAG,KAAtB;AACAW,OAAG,CAAC+B,SAAJ;AACA8E,oBAAgB;AAChBzB,eAAW;AACXC,qBAAiB;AACjBK,sBAAkB;AACnB;AACJ,CAZD;;AAcED,kBAAkB,GAAC,4BAAC9H,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,EAAoB;AACrCI,aAAW,CAAC/F,IAAD,EAAO2E,GAAP,EAAYgB,KAAZ,CAAX;AACAuD,kBAAgB;AAChBzB,aAAW;AACXM,oBAAkB;AAClBL,mBAAiB;AAClB,CAND;;AAQF9B,SAAS,GAAC,mBAACjB,GAAD,EAAO;AACfD,gBAAc,CAAC;AAAC9B,KAAC,EAAE+B,GAAG,CAAC/B,CAAJ,GAAM,CAAV;AAAaC,KAAC,EAAE8B,GAAG,CAAC9B,CAAJ,GAAM;AAAtB,GAAD,EAA2BF,SAAS,CAACC,CAAV,GAAY,CAAvC,EAA0CD,SAAS,CAACE,CAAV,GAAY,CAAtD,EAAyDF,SAAS,CAACC,CAAV,GAAY,EAArE,EAAyE,SAAzE,CAAd;AACD,CAFD;;AAIAyE,mBAAmB,GAAC,6BAACR,EAAD,EAAKE,EAAL,EAAU;AAC5B,MAAGF,EAAE,IAAIzD,mBAAmB,CAACR,CAA1B,IAA+BiE,EAAE,IAAIzD,mBAAmB,CAACR,CAApB,GAAwBK,WAAW,CAACL,CAAzE,IACDmE,EAAE,IAAI3D,mBAAmB,CAACP,CADzB,IAC8BkE,EAAE,IAAI3D,mBAAmB,CAACP,CAApB,GAAsBI,WAAW,CAACJ,CADzE,EAC2E;AACzEmC,cAAU,CAAC5B,mBAAD,EAAsB,iBAAtB,EAAyC;AAACR,OAAC,EAAE,CAAJ;AAAOC,OAAC,EAAE;AAAV,KAAzC,EAAwD,SAAxD,CAAV;AACA+E,cAAU,CAAG,YAAU;AAAC5C,gBAAU,CAAC5B,mBAAD,EAAsB,iBAAtB,EAAyC;AAACR,SAAC,EAAE,CAAJ;AAAOC,SAAC,EAAE;AAAV,OAAzC,EAAwD,MAAxD,CAAV;AAA0E,KAAxF,EAA0F,GAA1F,CAAV;;AAEA,QAAGmB,IAAI,CAAClF,WAAL,IAAmB,EAAtB,EAA0B;AACxB,WAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,YAAGsE,IAAI,CAACnF,WAAL,CAAiBa,CAAjB,EAAoBH,MAApB,KAA+BiB,SAAlC,EAA4C;AAAA;AAC1C,gBAAMmE,GAAG,GAAG;AAAC/B,eAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWV,CAAC,GAAC,CAAb,KAAiBiD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzC,CAAb;AAA0DC,eAAC,EAAEE,MAAM,CAACF,CAAP,GAAUnD,CAAC,GAAC,CAAH,IAAOiD,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAA/B;AAAtE,aAAZ;AAEA,gBAAIsG,QAAQ,GAAGnF,IAAI,CAACnF,WAAL,CAAiBa,CAAjB,CAAf;AACA,gBAAIM,IAAI,GAAGgE,IAAI,CAAC/E,QAAL,CAAcS,CAAd,CAAX;AACA2F,2BAAe,CAACV,GAAD,EAAM,CAAN,EAAS,CAAT,EAAY,OAAZ,EAAqBwE,QAArB,EAA+B,UAA/B,CAAf;AACAvB,sBAAU,CAAG,YAAU;AAACvC,6BAAe,CAACV,GAAD,EAAM,CAAN,EAAS,CAAT,EAAY,OAAZ,EAAqB3E,IAArB,EAA2B,UAA3B,CAAf;AAAsD,aAApE,EAAsE,EAAtE,CAAV,CAN0C,CAO1C;;AACA4H,sBAAU,CAAG,YAAU;AAACE,gCAAkB,CAAC9H,IAAD,EAAO2E,GAAP,EAAY,CAAZ,CAAlB;AAAiC,aAA/C,EAAiD,EAAjD,CAAV;AAR0C;AAU3C;AACF;;AACDqD,uBAAiB;AAClB;AACF;AACF,CAvBD;;AAyBAV,cAAc,GAAC,wBAACT,EAAD,EAAKE,EAAL,EAAU;AACvB,MAAGF,EAAE,IAAIxD,aAAa,CAACT,CAApB,IAAyBiE,EAAE,IAAIxD,aAAa,CAACT,CAAd,GAAkBK,WAAW,CAACL,CAA7D,IACDmE,EAAE,IAAI1D,aAAa,CAACR,CADnB,IACwBkE,EAAE,IAAI1D,aAAa,CAACR,CAAd,GAAgBI,WAAW,CAACJ,CAD7D,EAC+D;AAC3DmC,cAAU,CAAC3B,aAAD,EAAgB,WAAhB,EAA6B;AAACT,OAAC,EAAE,EAAJ;AAAQC,OAAC,EAAE;AAAX,KAA7B,EAA6C,SAA7C,CAAV;AACA+E,cAAU,CAAG,YAAU;AAAC5C,gBAAU,CAAC3B,aAAD,EAAgB,WAAhB,EAA6B;AAACT,SAAC,EAAE,EAAJ;AAAQC,SAAC,EAAE;AAAX,OAA7B,EAA6C,MAA7C,CAAV;AAA+D,KAA7E,EAA+E,GAA/E,CAAV;AACA4E,eAAW;AACX,QAAI2B,UAAU,GAAGnF,IAAI,CAACoF,sBAAL,CAA4BrF,IAAI,CAACnF,WAAjC,CAAjB;;AACA,QAAGuK,UAAU,CAACzJ,MAAX,GAAoB,CAAvB,EAAyB;AACvB6B,eAAS,IAAG,CAAZ;AACA8H,iBAAW,GAAG9H,SAAS,GAAE4H,UAAU,CAACzJ,MAApC;AACAyJ,gBAAU,CAACE,WAAD,CAAV,CAAwBzB,OAAxB,CAAgC,UAAA7H,IAAI,EAAG;AACrCC,WAAG,GAAG+D,IAAI,CAACnF,WAAL,CAAiB4B,OAAjB,CAAyBT,IAAzB,CAAN;AACA,YAAM2E,GAAG,GAAG;AAAC/B,WAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWH,GAAG,GAAC,CAAf,KAAmB0C,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA3C,CAAb;AAA4DC,WAAC,EAAEE,MAAM,CAACF,CAAP,GAAU5C,GAAG,GAAC,CAAL,IAAS0C,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAAjC;AAAxE,SAAZ,CAFqC,CAGrC;AACD,OAJD;AAKAmB,UAAI,CAACjF,QAAL,GAAgBqK,UAAU,CAACE,WAAD,CAA1B;AACA5B,uBAAiB;AAClB;AAEF;AACF,CApBH;;AAyBAD,WAAW,GAAC,uBAAI;AACd,OAAK,IAAI/H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,QAAMiF,GAAG,GAAG;AAAC/B,OAAC,EAAEG,MAAM,CAACH,CAAP,GAASzC,IAAI,CAACC,KAAL,CAAWV,CAAC,GAAC,CAAb,KAAiBiD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzC,CAAb;AAA0DC,OAAC,EAAEE,MAAM,CAACF,CAAP,GAAUnD,CAAC,GAAC,CAAH,IAAOiD,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAA/B;AAAtE,KAAZ;AACA4C,YAAQ,CAACd,GAAD,EAAM,CAAN,EAAS,OAAT,EAAkBX,IAAI,CAACnF,WAAL,CAAiBa,CAAjB,CAAlB,CAAR;AACD;AACF,CALD;;AAOA6H,aAAa,GAAC,uBAACV,EAAD,EAAKE,EAAL,EAAU;AACtB,MAAGF,EAAE,IAAIrD,YAAY,CAACZ,CAAnB,IAAwBiE,EAAE,IAAIrD,YAAY,CAACZ,CAAb,GAAiBK,WAAW,CAACL,CAA3D,IACDmE,EAAE,IAAIvD,YAAY,CAACX,CADlB,IACuBkE,EAAE,IAAIvD,YAAY,CAACX,CAAb,GAAeI,WAAW,CAACJ,CAD3D,EAC6D;AACzDmC,cAAU,CAACxB,YAAD,EAAe,UAAf,EAA2B;AAACZ,OAAC,EAAE,EAAJ;AAAQC,OAAC,EAAE;AAAX,KAA3B,EAA2C,SAA3C,CAAV;AACAN,UAAM,CAACqF,UAAP,CAAoB,YAAU;AAC5B5C,gBAAU,CAACxB,YAAD,EAAe,UAAf,EAA2B;AAACZ,SAAC,EAAE,EAAJ;AAAQC,SAAC,EAAE;AAAX,OAA3B,EAA2C,MAA3C,CAAV;AACA0G,aAAO;AAER,KAJD,EAIG,GAJH;AAKH;AACF,CAVD;;AAYAA,OAAO,GAAC,mBAAI;AACV9H,OAAK,GAAG,CAAR;AAEAyH,kBAAgB;AAChBlF,MAAI,GAAG,IAAIrF,IAAJ,EAAP;AACAsF,MAAI,GAAG,IAAIrD,IAAJ,EAAP;AACAoD,MAAI,CAAC7E,UAAL;;AACA,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BsE,QAAI,CAAC/E,QAAL,CAAcS,CAAd;AACD;;AACD,OAAK,IAAIE,CAAC,GAAG,EAAb,EAAiBA,CAAC,GAAG,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;AAC5BoE,QAAI,CAAC3E,YAAL,CAAkBO,CAAlB;AACD;;AACD6H,aAAW;AAEZ,CAfD;;AAiBAyB,gBAAgB,GAAC,4BAAI;AACnB7G,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAACgG,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBlG,MAAM,CAACG,KAA1B,EAAiC,EAAjC;AACAD,KAAG,CAACwD,WAAJ,GAAkB,SAAlB;AAEAxD,KAAG,CAACgG,QAAJ,CAAa,CAAb,EAAgB,GAAhB,EAAqBlG,MAAM,CAACG,KAA5B,EAAmCC,MAAM,CAACG,WAA1C;AAEAL,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAACgG,QAAJ,CAAa,CAAb,EAAgB,EAAhB,EAAoBlG,MAAM,CAACG,KAA3B,EAAkC,GAAlC;AACAD,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AAEAzC,KAAG,CAACgG,QAAJ,CAAatF,MAAM,CAACH,CAAP,GAAS,CAAtB,EAAyBG,MAAM,CAACF,CAAP,GAAS,EAAlC,EAAsCgB,eAAe,CAACjB,CAAhB,GAAmB,IAAE,CAAH,GAAMD,SAAS,CAACC,CAAhB,GAAkB,CAApC,GAAuC,IAAE,CAAH,GAAMI,WAAW,CAACJ,CAAlB,GAAoB,CAA1D,GAA4DG,MAAM,CAACH,CAAP,GAAS,CAArE,GAAuE,EAA7G,EAAiH,IAAED,SAAS,CAACE,CAAZ,GAAc,IAAEG,WAAW,CAACH,CAA5B,GAA8B,EAA/I;AACAR,KAAG,CAACiE,IAAJ,CAASvD,MAAM,CAACH,CAAP,GAAS,CAAlB,EAAqBG,MAAM,CAACF,CAAP,GAAS,EAA9B,EACEgB,eAAe,CAACjB,CAAhB,GAAmB,IAAE,CAAH,GAAMD,SAAS,CAACC,CAAhB,GAAkB,CAApC,GAAuC,IAAE,CAAH,GAAMI,WAAW,CAACJ,CAAlB,GAAoB,CAA1D,GAA4DG,MAAM,CAACH,CAAP,GAAS,CAArE,GAAuE,EADzE,EAC6E,IAAED,SAAS,CAACE,CAAZ,GAAc,IAAEG,WAAW,CAACH,CAA5B,GAA8B,EAD3G;AAEAR,KAAG,CAACyD,MAAJ;AAEAzD,KAAG,CAACyC,SAAJ,GAAgB,SAAhB;AACAzC,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AACA9C,KAAG,CAAC+C,QAAJ,CAAa,KAAb,EAAoB,GAApB,EAAyB,EAAzB;AAEA/C,KAAG,CAAC8C,IAAJ,GAAW,cAAX;AACA9C,KAAG,CAAC+C,QAAJ,CAAa,mBAAb,EAAkC,GAAlC,EAAuC,EAAvC;AACAoE,aAAW;AACZ,CAvBD;;AA0BAjH,MAAM,CAACkH,MAAP,GAAgB,YAAW;AACzBF,SAAO;AACPvB,mBAAiB;AAClB,CAHD;;AAKAA,iBAAiB,GAAC,6BAAI;AACpBhD,YAAU,CAAC1B,cAAD,yBAAiCW,IAAI,CAACoF,sBAAL,CAA4BrF,IAAI,CAACnF,WAAjC,EAA8Cc,MAA/E,GAAyF;AAACiD,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAAzF,EAAyG,MAAzG,CAAV;AACD,CAFD;;AAIAkF,kBAAkB,GAAC,8BAAI;AACrB,OAAK,IAAIrI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsE,IAAI,CAAChF,cAAL,CAAoBW,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;AACnDiG,SAAK,GAAG,IAAE,CAAV;AACA,QAAI+D,MAAM,GAAGvJ,IAAI,CAACC,KAAL,CAAWV,CAAC,GAAC,EAAb,KAAmB,CAACiD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAAzB,IAA4B+C,KAA5B,GAAkC,CAAlC,GAAoC,CAAvD,CAAb;AACA,QAAIhB,GAAG,GAAG;AAAC/B,OAAC,EAAEiB,eAAe,CAACjB,CAAhB,GAAmBlD,CAAC,GAAC,CAAH,IAAOiD,SAAS,CAACC,CAAV,GAAYI,WAAW,CAACJ,CAA/B,IAAkC+C,KAApD,GAA2D+D,MAA/D;AAAuE7G,OAAC,EAAEgB,eAAe,CAAChB,CAAhB,GAAmB1C,IAAI,CAACC,KAAL,CAAWV,CAAC,GAAC,CAAb,IAAgB,CAAjB,IAAqBiD,SAAS,CAACE,CAAV,GAAYG,WAAW,CAACH,CAA7C,IAAgD8C;AAA5I,KAAV;AACAF,YAAQ,CAACd,GAAD,EAAMgB,KAAN,EAAa,OAAb,EAAsB3B,IAAI,CAAChF,cAAL,CAAoBU,CAApB,CAAtB,CAAR;AACD;AACF,CAPD;;AASAuI,SAAS,GAAC,qBAAI;AACZjD,YAAU,CAAC9B,SAAD,mBAAsBzB,KAAtB,GAA+B;AAACmB,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAA/B,EAA+C,MAA/C,CAAV;AACD,CAFD;;AAIA2G,WAAW,GAAC,uBAAI;AACdvB,WAAS;AACTjD,YAAU,CAAC7B,UAAD,EAAa,QAAb,EAAuB;AAACP,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAAvB,EAAuC,MAAvC,CAAV;AACAmC,YAAU,CAAC5B,mBAAD,EAAsB,iBAAtB,EAAyC;AAACR,KAAC,EAAE,CAAJ;AAAOC,KAAC,EAAE;AAAV,GAAzC,EAAwD,MAAxD,CAAV;AACAmC,YAAU,CAACxB,YAAD,EAAe,UAAf,EAA2B;AAACZ,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAA3B,EAA2C,MAA3C,CAAV;AACAmC,YAAU,CAACzB,uBAAD,EAA0B,cAA1B,EAA0C;AAACX,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAA1C,EAA0D,MAA1D,CAAV;AACAmC,YAAU,CAAC3B,aAAD,EAAgB,WAAhB,EAA6B;AAACT,KAAC,EAAE,EAAJ;AAAQC,KAAC,EAAE;AAAX,GAA7B,EAA6C,MAA7C,CAAV;AACAmF,mBAAiB;AAClB,CARD,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/main.js\");\n","const COLORS = ['#fb4c4d', '#0ef691', '#62a6e0'];\nconst SYMBOL = ['oval', 'rectangle', 'diamond'];\nconst NUMBER = [1, 2, 3];\nconst SHADING = ['solid', 'open', 'striped'];\n\nclass Deck {\n  constructor(){\n    this.pile = [];\n    this.faceUpCards = [];\n    this.faceUpCount = 0;\n    this.selected = [];\n    this.outOfPlayCards = [];\n    this.dealCard = this.dealCard.bind(this);\n    this.createDeck = this.createDeck.bind(this);\n    this.removeCard = this.removeCard.bind(this);\n    this.dealNullCard = this.dealNullCard.bind(this);\n  }\n\n  card(color, symbol, number, shading){\n    return {color: color, symbol: symbol, number: number, shading: shading};\n  }\n\n  createDeck(){\n    for (let i = 0; i < COLORS.length; i++) {\n      for (let j = 0; j < SYMBOL.length; j++) {\n        for (let k = 0; k < NUMBER.length; k++) {\n          for (let l = 0; l < SHADING.length; l++) {\n            this.pile.push(this.card(COLORS[i], SYMBOL[j], NUMBER[k], SHADING[l]));\n          }          \n        } \n      } \n    }\n  }  \n\n  dealCard(idx){\n    // if(this.faceUpCards[idx] && this.faceUpCards[idx].symbol !== undefined){\n    //     return this.faceUpCards[idx];\n    // }\n    if(this.pile.length > 0){\n      idxPile = Math.floor(Math.random()*(this.pile.length-1));\n      this.faceUpCards[idx]=(this.pile[idxPile]);\n      this.faceUpCount += 1;\n      this.pile.splice(idxPile, 1);\n      return this.faceUpCards[idx];\n    } else {\n      return this.dealNullCard(idx);\n    }\n  }\n\n  dealNullCard(idx){\n    let nullCard =  this.card(undefined, undefined, undefined, undefined);\n    this.faceUpCards[idx] = nullCard;\n    return nullCard;\n  }\n\n  removeCard(card){\n    this.outOfPlayCards.push(card);\n    // this.selected.splice(this.selected.indexOf(card), 1);\n    idx = this.faceUpCards.indexOf(card);\n    this.faceUpCount -= 1;\n    \n    if(this.faceUpCount < 12) {\n      \n      this.dealCard(idx);\n    } else {\n      this.dealNullCard(idx);\n    }\n    return idx;\n  }\n}\n\nmodule.exports = Deck;","class Game {\n  constructor(){\n  }\n\n  isValidSelection(selection){\n    return(selection.length === 3 && this.validColors(selection) && this.validNumbers(selection) \n      && this.validShading(selection) && this.validSymbols(selection))\n  }\n\n  validColors(selection){\n    testOne = selection[0].color === selection[1].color\n      && selection[0].color === selection[2].color\n    testTwo = selection[0].color !== selection[1].color\n      && selection[0].color !== selection[2].color\n      && selection[1].color !== selection[2].color\n    testThree = selection[0].color !== undefined && selection[1].color !== undefined\n      && selection[2].color !== undefined;\n    return (testOne || testTwo) && testThree;\n  }\n\n  validShading(selection){\n    testOne = selection[0].shading === selection[1].shading\n      && selection[0].shading === selection[2].shading\n    testTwo = selection[0].shading !== selection[1].shading\n      && selection[0].shading !== selection[2].shading\n      && selection[1].shading !== selection[2].shading\n    return testOne || testTwo;\n  }\n\n  validNumbers(selection){\n    testOne = selection[0].number === selection[1].number\n      && selection[0].number === selection[2].number\n    testTwo = selection[0].number !== selection[1].number\n      && selection[0].number !== selection[2].number\n      && selection[1].number !== selection[2].number\n    return testOne || testTwo;\n  }\n\n  validSymbols(selection){\n    testOne = selection[0].symbol === selection[1].symbol\n      && selection[0].symbol === selection[2].symbol\n    testTwo = selection[0].symbol !== selection[1].symbol\n      && selection[0].symbol !== selection[2].symbol\n      && selection[1].symbol !== selection[2].symbol\n    return testOne || testTwo;\n  }\n\n  findAllValidSelections(faceUpCards){\n    validSelections = [];\n    for (let i = 0; i < faceUpCards.length-2; i++) {\n      for (let j = i+1; j < faceUpCards.length-1; j++) {\n        for (let k = j+1; k < faceUpCards.length; k++) {\n          if(i !== j && i !== k && j !== k ){\n              let selection = [faceUpCards[i], faceUpCards[j], faceUpCards[k]];\n              if(this.isValidSelection(selection)){\n                validSelections.push(selection);\n              }\n          } \n        }  \n      }\n    }\n    return validSelections;\n  }\n\n}\n\nmodule.exports = Game;","const Deck = require('./deck.js');\nconst Game = require('./game.js');\n\nlet showCount = 0;\nlet score = 0;\n\nlet instructionsShowing = false;\n\nlet background = new Image();\nbackground.src = './assets/images/escher.png';\nlet canvasBackground = document.createElement(\"canvas\");\nlet ctxBackground = canvasBackground.getContext(\"2d\");\n\n\n  let canvas = document.getElementById(\"canvas\");\n  let ctx = canvas.getContext(\"2d\");\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n\n  const CARD_SIZE = {x: 100*130/140, y: 140*130/140};\n  const SYMBOL_SIZE = CARD_SIZE.y*3/14;\n  const IN_SET = {x: 10, y: 80};\n  const CARD_MARGIN = {x: 20, y: 30};\n  const SUBMIT_SIZE = {x: 150, y: 30};\n  const SCORE_POS = {x: IN_SET.x+5*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y};\n  const SUBMIT_POS = {x: SCORE_POS.x, y: SCORE_POS.y + SUBMIT_SIZE.y+30};\n  const DEAL_THREE_MORE_POS = {x: SUBMIT_POS.x, y: SUBMIT_POS.y + SUBMIT_SIZE.y+30};\n  const SHOW_MOVE_POS = {x: DEAL_THREE_MORE_POS.x, y: DEAL_THREE_MORE_POS.y+SUBMIT_SIZE.y+30};\n  const SHOW_VALID_POS = {x: SHOW_MOVE_POS.x, y: SHOW_MOVE_POS.y+SUBMIT_SIZE.y+30};\n  const INSTRUCTIONS_BUTTON_POS= {x: SHOW_VALID_POS.x, y: SHOW_VALID_POS.y + SUBMIT_SIZE.y+30};\n  const NEW_GAME_POS = {x: INSTRUCTIONS_BUTTON_POS.x, y: INSTRUCTIONS_BUTTON_POS.y + SUBMIT_SIZE.y+30};\n  const INSTRUCTIONS_POS = {x: IN_SET.x+2*CARD_SIZE.x+1.5*CARD_MARGIN.x, y: 2};\n  const INSTRUCTIONS_SIZE = {x: 600, y: canvas.height};\n  const CLOSE_INSTRUCTIONS_POS = {x: INSTRUCTIONS_POS.x+INSTRUCTIONS_SIZE.x - 40, y: 10};\n  const CLOSE_INSTRUCTIONS_SIZE = {x: 20, y: 20};\n  const OUT_OF_PLAY_POS = {x: SUBMIT_POS.x+SUBMIT_SIZE.x+CARD_MARGIN.x, y: IN_SET.y};\n  const YOU_WIN_POS = {x: 195, y:250 }\n  const YOU_WIN_SIZE = {x: 300, y: 300};\n  \n\n\n  deck = new Deck;\n  game = new Game;\n  deck.createDeck();\n\nlet canvasPattern = document.createElement(\"canvas\");\nlet ctxPattern = canvasPattern.getContext(\"2d\");\ncanvasPattern.width = 10;\ncanvasPattern.height = 10;\n\n\n\n\nctxPattern.beginPath();\nctxPattern.moveTo(10, 10);\nctxPattern.lineTo(0, 0);\nctxPattern.closePath();\n\n\n\n\ncanvas.addEventListener(\"click\", handleClick);\n\n\ndrawRoundedRec=(pos, width, length, radius, color)=>{\n\n      ctx.beginPath();\n      ctx.moveTo(pos.x+radius, pos.y);\n      ctx.lineTo(pos.x+width-radius, pos.y, radius);\n      ctx.arcTo(pos.x+width, pos.y, pos.x+width, pos.y+radius, radius);\n      ctx.lineTo(pos.x+width, pos.y+length-radius);\n      ctx.arcTo(pos.x+width, pos.y+length, pos.x+width-radius, pos.y+length, radius);\n      ctx.lineTo(pos.x+radius, pos.y+length);\n      ctx.arcTo(pos.x, pos.y+length, pos.x, pos.y+length-radius, radius);\n      ctx.lineTo(pos.x, pos.y+radius);\n      ctx.arcTo(pos.x, pos.y, pos.x+radius, pos.y, radius);\n      ctx.fillStyle = color;\n      ctx.fill();\n      ctx.closePath();\n\n }\n\n drawButton=(pos, text, textPos, color)=>{\n  drawRoundedRec(pos, SUBMIT_SIZE.x, SUBMIT_SIZE.y, SUBMIT_SIZE.x/10, color);\n  ctx.fillStyle = \"white\";\n  ctx.font = \"19px Georgia\";\n  ctx.fillText(text, pos.x+textPos.x, pos.y+textPos.y);\n}\n    \n\n    // ctx.fillStyle = \"white\";\n    // ctx.fillRect(100, 100, 5, 5);  \n\nanimateDrawCard=(pos, startScale, endScale, color, card, direction)=>{\n  if(startScale !== endScale){\n\n    drawCard(pos, startScale, color, card);\n    direction === \"increase\" ? startScale += .50 : startScale -= .50;\n    requestAnimationFrame(function(){animateDrawCard(pos, startScale, endScale, color, card, direction)});\n  }\n}\n\n  drawCard=( pos, scale, color, card)=>{\n    if(scale>=0){\n    clearCard(pos);\n    drawRoundedRec(pos, CARD_SIZE.x*scale, CARD_SIZE.y*scale, CARD_SIZE.x*scale/10, color);\n    ctx.strokeStyle = \"#f8cdbf\";\n    ctx.stroke();\n    if(card) drawSymbols(card, pos, scale); \n    }\n  }\n\n\n\n drawDiamond=(card, pos, scale)=>{\n  ctx.beginPath();\n  ctx.moveTo(pos.x, pos.y+SYMBOL_SIZE*scale/2);\n  ctx.lineTo(pos.x+SYMBOL_SIZE*scale, pos.y);\n  ctx.lineTo(pos.x+2*SYMBOL_SIZE*scale, pos.y+SYMBOL_SIZE*scale/2);\n  ctx.lineTo(pos.x+SYMBOL_SIZE*scale, pos.y+SYMBOL_SIZE*scale);\n  ctx.lineTo(pos.x, pos.y+SYMBOL_SIZE*scale/2);\n  ctx.closePath();\n  colorSymbols(card);\n}\n\n drawOval=(card, pos, scale)=>{\n  ctx.beginPath();\n  ctx.ellipse(pos.x+SYMBOL_SIZE*scale, pos.y+SYMBOL_SIZE*scale/2, SYMBOL_SIZE*scale, SYMBOL_SIZE*scale/2, 0, 0, 2*Math.PI);\n  ctx.closePath();\n  colorSymbols(card);\n}\n\ndrawRectangle=( card, pos, scale)=>{\n  ctx.beginPath();\n  ctx.rect(pos.x, pos.y, 2*SYMBOL_SIZE*scale, SYMBOL_SIZE*scale);\n  ctx.closePath();\n  colorSymbols(card);\n}\n\n\ncolorSymbols=(card)=>{\n  ctx.fillStyle = card.color;\n  ctx.strokeStyle = card.color\n  if(card.shading === \"open\") ctx.stroke();\n  if(card.shading === \"solid\") ctx.fill();\n  if(card.shading === \"striped\") {\n    ctxPattern.strokeStyle = card.color;\n    ctxPattern.stroke();\n    ctx.fillStyle = ctx.createPattern(canvasPattern,\"repeat\");\n    ctx.stroke();\n    ctx.fill(); \n  }\n}\n\n\n// animateDrawSymbols=(card, pos, startScale, endScale)=>{\n//   if(startScale !== 1){\n//     startScale += .;\n//     drawSymbols(card, pos, startScale);\n//     requestAnimationFrame(function(){animateDrawCard(card, pos, startScale, endScale)});\n//   }\n// }\n\ndrawSymbols=(card, pos, scale)=>{\n  if(card.symbol === undefined){\n    ctx.globalAlpha = .5;\n    drawCard(pos, scale, ctx.createPattern(background,\"repeat\"))\n    ctx.globalAlpha = 1;\n  }\n  if(card.symbol === \"rectangle\") drawRectangles(card, pos, scale);\n  if(card.symbol === \"diamond\") drawDiamonds(card, pos, scale);\n  if(card.symbol === \"oval\") drawOvals(card, pos, scale);\n}\n\n\ndrawRectangles=(card, pos, scale)=>{\n  if(card.number === 1){\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n  } else if (card.number === 2){\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*7/6}, scale)\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*15/6}, scale)\n  } else {\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale/2}, scale)\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n    drawRectangle(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*19/6}, scale)\n  }\n}\n\ndrawOvals=(card, pos, scale)=>{\n  if(card.number === 1){\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n  } else if (card.number === 2){\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*7/6}, scale)\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*15/6}, scale)\n  } else {\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale/2}, scale)\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n    drawOval(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*19/6}, scale)\n  }\n}\n\ndrawDiamonds=(card, pos, scale)=>{\n  if(card.number === 1){\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n  } else if (card.number === 2){\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*7/6}, scale)\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*15/6}, scale)\n  } else {\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale/2}, scale)\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*11/6}, scale)\n    drawDiamond(card, {x: pos.x+SYMBOL_SIZE*scale*2/3, y: pos.y+SYMBOL_SIZE*scale*19/6}, scale)\n  }\n}\n\nfunction handleClick(event){\n  cx = event.pageX;\n  cy = event.pageY;\n  if(instructionsShowing){\n    handleCloseInstructions(cx, cy);\n  } else if (score < 10) {\n    \n    handleShowInstructions(cx, cy);\n    handleSelect(cx, cy);\n    handleSubmit(cx, cy);\n    handleDealThreeMore(cx, cy);\n    handleShowMove(cx, cy);\n    handleNewGame(cx, cy);\n  }  else {\n    handleNewGame(cx, cy);\n\n  }\n}\n\nhandleSelect=(cx, cy)=>{\n  for (let i = 0; i < 15; i++) {\n    const pos = {x: IN_SET.x+Math.floor(i/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(i%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n    if(cx >= pos.x && cx <= pos.x + CARD_SIZE.x &&\n      cy >= pos.y && cy <= pos.y+CARD_SIZE.y){\n      let card = deck.faceUpCards[i];\n      if (card && card.symbol !== undefined){\n        if(deck.selected.includes(card)){\n          deck.selected.splice(deck.selected.indexOf(card), 1);\n          renderBoard();\n          highlightSelected();\n        } else {\n          deck.selected.push(deck.faceUpCards[i]);\n          renderBoard();\n          highlightSelected();\n        }\n      } \n      if (deck.selected.length > 3) {\n        const idx = deck.faceUpCards.indexOf(deck.selected[2]);\n        const oldPos = {x: IN_SET.x+Math.floor(idx/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(idx%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n        deck.selected.splice(2, 1);\n        // ctx.clearRect(oldPos.x, oldPos.y, CARD_SIZE.x, CARD_SIZE.y);\n        // drawCard(oldPos, 1, \"white\");\n        // drawSymbols(deck.faceUpCards[idx], oldPos, 1);\n        renderBoard();\n        highlightSelected();\n      }\n      break;\n    }\n  }\n}\n\n\n\nhandleSubmit=(cx, cy)=>{\n  if(cx >= SUBMIT_POS.x && cx <= SUBMIT_POS.x + SUBMIT_SIZE.x &&\n    cy >= SUBMIT_POS.y && cy <= SUBMIT_POS.y+SUBMIT_SIZE.y){\n    drawButton(SUBMIT_POS, \"Submit\", {x: 42, y: 22}, \"#d2cecf\");\n    window.setTimeout(  function(){drawButton(SUBMIT_POS, \"Submit\", {x: 42, y: 22}, \"gray\")}, 100);\n    if(deck.selected.length ===3){\n      if(game.isValidSelection(deck.selected)){\n        deck.selected.forEach(card=> {\n          const idx = deck.removeCard(card);\n          const pos = {x: IN_SET.x+Math.floor(idx/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(idx%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n          // animateDrawCard(pos, 0, 1, \"white\");          \n          animateDrawCard(pos, 1, 0, \"white\", card, \"decrease\"); \n          setTimeout(  function(){animateDrawCard(pos, 0, 1, \"white\", deck.faceUpCards[idx], \"increase\")}, 30);\n         \n          setTimeout( function(){afterCardAnimation(card, pos, 1)}, 55);\n        });\n        deck.selected = [];\n        \n        renderBoard();\n        score +=1;\n        drawOutOfPlayCards();\n\n        showNumberOfMoves();\n        showScore();\n        setTimeout(  function(){if(score === 10) showWin()}, 100);\n      } \n    }\n  }\n\n\n}\n\nshowWin=()=>{\n  ctx.fillStyle = \"#ebad07\";\n  ctx.font = \"100px Georgia\";\n  \n  ctx.fillText(\"You\", YOU_WIN_POS.x, YOU_WIN_POS.y );\n  ctx.fillText(\"win!\", YOU_WIN_POS.x-5, YOU_WIN_POS.y+100 );\n  ctx.font = \"20px Georgia\";\n  ctx.fillText(\"Click New Game to start a new game!\", YOU_WIN_POS.x-80, YOU_WIN_POS.y+150 );\n\n\n\n}\n\nhighlightCard=(pos, color)=>{\n  ctx.globalAlpha = .3;\n  drawRoundedRec(pos, CARD_SIZE.x, CARD_SIZE.y, CARD_SIZE.x/10, color);\n  ctx.globalAlpha = 1;\n}\n\nhighlightSelected=()=>{\n  let color = game.isValidSelection(deck.selected) ? \"#07eb1d\" : \"yellow\";\n  deck.selected.forEach(card=>{\n    idx = deck.faceUpCards.indexOf(card);\n    const pos = {x: IN_SET.x+Math.floor(idx/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(idx%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n    highlightCard(pos, color);\n  })\n}\n\ndrawInstructions=()=>{\n  drawButton(INSTRUCTIONS_BUTTON_POS, \"Instructions\", {x: 23, y: 21}, \"gray\");\n\n  ctx.fillStyle = \"gray\";\n  ctx.globalAlpha = .5;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  instructionsShowing = true;\n\n  ctx.globalAlpha = 1;\n  ctx.fillStyle= \"#BDF3FF\";\n  ctx.strokeStyle=\"#847b7e\";\n  ctx.fillRect(INSTRUCTIONS_POS.x, INSTRUCTIONS_POS.y, INSTRUCTIONS_SIZE.x, INSTRUCTIONS_SIZE.y);\n  ctx.beginPath();\n  ctx.rect(INSTRUCTIONS_POS.x, INSTRUCTIONS_POS.y, INSTRUCTIONS_SIZE.x, INSTRUCTIONS_SIZE.y);\n  ctx.closePath();\n  ctx.stroke();\n\n  ctx.fillStyle = \"red\";\n  ctx.fillRect(CLOSE_INSTRUCTIONS_POS.x, CLOSE_INSTRUCTIONS_POS.y, CLOSE_INSTRUCTIONS_SIZE.x, CLOSE_INSTRUCTIONS_SIZE.y);\n  ctx.fillStyle = \"white\";\n  ctx.font = \"19px Georgia\";\n  ctx.fillText(\"x\", CLOSE_INSTRUCTIONS_POS.x+6, CLOSE_INSTRUCTIONS_POS.y+15);\n\n  ctx.fillStyle = \"#514e4f\";\n  ctx.fillText(\"                                               Instructions:\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+50 );\n  \n  ctx.font = \"18px Georgia\";\n\n  ctx.fillText(\"   The object of each round of Set is to find a ‘set’ of three cards from the\", \n    INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+90 );\n\n  ctx.fillText(\"      available face up cards. Each card has four features (color, symbol,\", \n    INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+115 );\n  \n  ctx.fillText(\"   number and shading). In a proper ‘set,’ for each feature, all three cards\", \n    INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+140 );\n\n  ctx.fillText(\"     have the same variation of the feature, or different variations of the\", \n    INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+165 );\n\n  ctx.fillText(\"                feature. The variations of each feature are as follows:\", \n    INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+190 );\n  \n  ctx.fillText(\"                              1. Color: red, green, or blue.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+215 );\n  ctx.fillText(\"                              2. Symbol: ovals, rectangles, or diamonds.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+240 );\n  ctx.fillText(\"                              3. Number: one, two, or three symbols. \", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+265 );\n  ctx.fillText(\"                              4. Shading: solid, open, or striped.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+290 );\n  ctx.fillText(\" In the set below, the cards have different numbers and symbols, and the\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+315 );\n  ctx.fillText(\"                                   same color and shading.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+340 );\n\n  let card1 = deck.card(\"#0ef691\", 'oval', 1, 'striped' );\n  let card2 = deck.card(\"#0ef691\", 'rectangle', 2, 'striped' );\n  let card3 = deck.card(\"#0ef691\", 'diamond', 3, 'striped' );\n  let pos1 = {x: INSTRUCTIONS_POS.x+200, y: INSTRUCTIONS_POS.y+365};\n  let pos2 = {x: INSTRUCTIONS_POS.x+200 + (CARD_SIZE.x+CARD_MARGIN.x)*1/2, y: INSTRUCTIONS_POS.y+365};\n  let pos3 = {x: INSTRUCTIONS_POS.x+200+(CARD_SIZE.x+CARD_MARGIN.x)*1/2*2, y: INSTRUCTIONS_POS.y+365};\n\n  drawCard(pos1, 1/2, \"white\", card1);\n  drawCard(pos2, 1/2, \"white\", card2);\n  drawCard(pos3, 1/2, \"white\", card3);\n\n  ctx.fillStyle = \"#514e4f\";\n  ctx.fillText(\"    And this next set has different numbers, symbols, colors and shading.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+470 );\n\n  let card4 = deck.card(\"#0ef691\", 'oval', 1, 'striped' );\n  let card5 = deck.card(\"#fb4c4d\", 'rectangle', 2, 'solid' );\n  let card6 = deck.card(\"#62a6e0\", 'diamond', 3, 'open' );\n  let pos4 = {x: INSTRUCTIONS_POS.x+200, y: INSTRUCTIONS_POS.y+495};\n  let pos5 = {x: INSTRUCTIONS_POS.x+200 + (CARD_SIZE.x+CARD_MARGIN.x)*1/2, y: INSTRUCTIONS_POS.y+495};\n  let pos6 = {x: INSTRUCTIONS_POS.x+200+(CARD_SIZE.x+CARD_MARGIN.x)*1/2*2, y: INSTRUCTIONS_POS.y+495};\n\n  drawCard(pos4, 1/2, \"white\", card4);\n  drawCard(pos5, 1/2, \"white\", card5);\n  drawCard(pos6, 1/2, \"white\", card6);\n\n  ctx.fillStyle = \"#514e4f\";\n  ctx.fillText(\"                         The game ends when you find ten sets.\", INSTRUCTIONS_POS.x+10, INSTRUCTIONS_POS.y+600 );\n}\n\nhandleShowInstructions=(cx, cy)=>{\n  \n  if(cx >= INSTRUCTIONS_BUTTON_POS.x && cx <= INSTRUCTIONS_BUTTON_POS.x + SUBMIT_SIZE.x &&\n    cy >= INSTRUCTIONS_BUTTON_POS.y && cy <= INSTRUCTIONS_BUTTON_POS.y+SUBMIT_SIZE.y){\n      drawButton(INSTRUCTIONS_BUTTON_POS, \"Instructions\", {x: 23, y: 21}, \"#d2cecf\");\n      setTimeout(  drawInstructions, 100);\n  }\n\n}\n\nhandleCloseInstructions=(cx, cy)=>{\n  if( (cx >= CLOSE_INSTRUCTIONS_POS.x && cx <= CLOSE_INSTRUCTIONS_POS.x + CLOSE_INSTRUCTIONS_SIZE.x &&\n    cy >= CLOSE_INSTRUCTIONS_POS.y && cy <= CLOSE_INSTRUCTIONS_POS.y+CLOSE_INSTRUCTIONS_SIZE.y) ||\n    ( cx < INSTRUCTIONS_POS.x ) || (cx > INSTRUCTIONS_POS.x + INSTRUCTIONS_SIZE.x)\n    ){ \n      instructionsShowing = false;\n      ctx.beginPath();\n      renderBackground();\n      renderBoard();\n      highlightSelected();\n      drawOutOfPlayCards();\n    }\n}\n\n  afterCardAnimation=(card, pos, scale)=>{\n    drawSymbols(card, pos, scale)\n    renderBackground();\n    renderBoard();\n    drawOutOfPlayCards();\n    highlightSelected();\n  }\n\nclearCard=(pos)=>{\n  drawRoundedRec({x: pos.x-1, y: pos.y-1}, CARD_SIZE.x+2, CARD_SIZE.y+2, CARD_SIZE.x/10, \"#BDF3FF\");\n}\n\nhandleDealThreeMore=(cx, cy)=>{\n  if(cx >= DEAL_THREE_MORE_POS.x && cx <= DEAL_THREE_MORE_POS.x + SUBMIT_SIZE.x &&\n    cy >= DEAL_THREE_MORE_POS.y && cy <= DEAL_THREE_MORE_POS.y+SUBMIT_SIZE.y){\n    drawButton(DEAL_THREE_MORE_POS, \"Deal Three More\", {x: 5, y: 21}, \"#d2cecf\");\n    setTimeout(  function(){drawButton(DEAL_THREE_MORE_POS, \"Deal Three More\", {x: 5, y: 21}, \"gray\")}, 100);\n\n    if(deck.faceUpCount <=12 ){\n      for (let i = 0; i < 15; i++) {\n        if(deck.faceUpCards[i].symbol === undefined){\n          const pos = {x: IN_SET.x+Math.floor(i/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(i%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n\n          let prevCard = deck.faceUpCards[i];\n          let card = deck.dealCard(i);\n          animateDrawCard(pos, 1, 0, \"white\", prevCard, \"decrease\");          \n          setTimeout(  function(){animateDrawCard(pos, 0, 1, \"white\", card, \"increase\")}, 30);\n          // animateDrawCard(pos, 0, 1, \"white\", \"increase\");          \n          setTimeout(  function(){afterCardAnimation(card, pos, 1)}, 55);\n\n        }\n      }\n      showNumberOfMoves();\n    }\n  }\n}\n\nhandleShowMove=(cx, cy)=>{\n  if(cx >= SHOW_MOVE_POS.x && cx <= SHOW_MOVE_POS.x + SUBMIT_SIZE.x &&\n    cy >= SHOW_MOVE_POS.y && cy <= SHOW_MOVE_POS.y+SUBMIT_SIZE.y){\n      drawButton(SHOW_MOVE_POS, \"Show Move\", {x: 25, y: 21}, \"#d2cecf\");\n      setTimeout(  function(){drawButton(SHOW_MOVE_POS, \"Show Move\", {x: 25, y: 21}, \"gray\")}, 100);\n      renderBoard();\n      let selections = game.findAllValidSelections(deck.faceUpCards);\n      if(selections.length > 0){\n        showCount +=1;\n        selectIndex = showCount%(selections.length);\n        selections[selectIndex].forEach(card =>{\n          idx = deck.faceUpCards.indexOf(card);\n          const pos = {x: IN_SET.x+Math.floor(idx/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(idx%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n          // highlightCard(pos);\n        })\n        deck.selected = selections[selectIndex];\n        highlightSelected();\n      }\n      \n    }\n  }\n\n\n\n\nrenderBoard=()=>{\n  for (let i = 0; i < 15; i++) {\n    const pos = {x: IN_SET.x+Math.floor(i/3)*(CARD_SIZE.x+CARD_MARGIN.x), y: IN_SET.y+(i%3)*(CARD_SIZE.y+CARD_MARGIN.y)};\n    drawCard(pos, 1, \"white\", deck.faceUpCards[i]);\n  }\n}\n\nhandleNewGame=(cx, cy)=>{\n  if(cx >= NEW_GAME_POS.x && cx <= NEW_GAME_POS.x + SUBMIT_SIZE.x &&\n    cy >= NEW_GAME_POS.y && cy <= NEW_GAME_POS.y+SUBMIT_SIZE.y){\n      drawButton(NEW_GAME_POS, \"New Game\", {x: 30, y: 21}, \"#d2cecf\");\n      window.setTimeout(  function(){\n        drawButton(NEW_GAME_POS, \"New Game\", {x: 30, y: 21}, \"gray\");\n        newGame();\n\n      }, 100);\n  }\n}\n\nnewGame=()=>{\n  score = 0;\n\n  renderBackground();\n  deck = new Deck;\n  game = new Game;\n  deck.createDeck();\n  for (let i = 0; i < 12; i++) {\n    deck.dealCard(i);\n  }\n  for (let j = 12; j < 15; j++) {\n    deck.dealNullCard(j);\n  }\n  renderBoard();\n\n}\n\nrenderBackground=()=>{\n  ctx.fillStyle = \"#e59fb8\";\n  ctx.fillRect(0, 0, canvas.width, 50);\n  ctx.strokeStyle = \"#e59fb8\";\n\n  ctx.fillRect(0, 560, canvas.width, window.innerHeight);\n\n  ctx.fillStyle = \"#f8cdbf\";\n  ctx.fillRect(0, 50, canvas.width, 520 );\n  ctx.fillStyle = \"#BDF3FF\";\n\n  ctx.fillRect(IN_SET.x/2, IN_SET.y-15, OUT_OF_PLAY_POS.x+(1/3)*CARD_SIZE.x*6+(1/3)*CARD_MARGIN.x*4+IN_SET.x/2+20, 3*CARD_SIZE.y+2*CARD_MARGIN.y+40)\n  ctx.rect(IN_SET.x/2, IN_SET.y-15, \n    OUT_OF_PLAY_POS.x+(1/3)*CARD_SIZE.x*6+(1/3)*CARD_MARGIN.x*4+IN_SET.x/2+20, 3*CARD_SIZE.y+2*CARD_MARGIN.y+40 );\n  ctx.stroke();\n\n  ctx.fillStyle = \"#BDF3FF\";\n  ctx.font = \"60px Georgia\";\n  ctx.fillText(\"SET\", 100, 50);\n\n  ctx.font = \"40px Georgia\";\n  ctx.fillText(\"by Najja Kossally\", 450, 50);\n  drawButtons(); \n}\n\n\nwindow.onload = function() {\n  newGame();\n  showNumberOfMoves();\n}\n\nshowNumberOfMoves=()=>{\n  drawButton(SHOW_VALID_POS, `Valid Moves: ${game.findAllValidSelections(deck.faceUpCards).length}`, {x: 13, y: 22}, \"gray\");\n}\n\ndrawOutOfPlayCards=()=>{\n  for (let i = 0; i < deck.outOfPlayCards.length; i++) {\n    scale = 1/3;\n    let column = Math.floor(i/15)* ((CARD_SIZE.x+CARD_MARGIN.x)*scale*3+5);\n    let pos = {x: OUT_OF_PLAY_POS.x+(i%3)*(CARD_SIZE.x+CARD_MARGIN.x)*scale +column, y: OUT_OF_PLAY_POS.y+(Math.floor(i/3)%5)*(CARD_SIZE.y+CARD_MARGIN.y)*scale}\n    drawCard(pos, scale, \"white\", deck.outOfPlayCards[i]);\n  }\n}\n\nshowScore=()=>{\n  drawButton(SCORE_POS, `Score: ${score}`, {x: 42, y: 22}, \"gray\");\n}\n\ndrawButtons=()=>{\n  showScore();\n  drawButton(SUBMIT_POS, \"Submit\", {x: 42, y: 22}, \"gray\");\n  drawButton(DEAL_THREE_MORE_POS, \"Deal Three More\", {x: 5, y: 21}, \"gray\");\n  drawButton(NEW_GAME_POS, \"New Game\", {x: 30, y: 21}, \"gray\");\n  drawButton(INSTRUCTIONS_BUTTON_POS, \"Instructions\", {x: 23, y: 21}, \"gray\");\n  drawButton(SHOW_MOVE_POS, \"Show Move\", {x: 25, y: 21}, \"gray\");\n  showNumberOfMoves();\n}\n\n\n\n\n"],"sourceRoot":""}